<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />  
    <meta http-equiv="Pragma" content="no-cache" />  
    <meta http-equiv="Expires" content="0" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>音乐播放器</title>
    <script type="text/javascript" src="./js/data.js"></script>
</head>  
<body>


<div style="text-align: center">
    <div style="color: cadetblue;font-size: 10px" id="musicTitle"></div>
    <br>
    <audio id="audio-player" controls></audio>
    <div id="newPlay" style="color: cadetblue ;font-size: 10px" class="ellipsis"></div>
</div>
<div id="authors"></div>
<div id="music-list"></div>
<div style="text-align: center; position: fixed; bottom: 20px; right: 30px; z-index: 100;">  
    <button id="backToTopBtn" class="circle">顶</button>  
</div>
<script>
    // 渲染音乐列表  
    const musicList = document.getElementById('music-list');
    const authors = document.getElementById('authors');
    const musicTitle = document.getElementById('musicTitle');
    const span = document.createElement('span');
    // 为span元素赋值
    span.textContent = '更新时间：'+dataAll.dataDate;
    // 将span元素添加到div元素中
    musicTitle.appendChild(span);
    dataAll.authors.forEach(author => {
        const authorName = document.createElement('h4');
        authorName.style.color = 'red'
        authorName.style.fontWeight = 'bold';
        const dataList = document.createElement('div');
        authorName.textContent = author.name;

        if (author.dataList.length  > 0){
            var index = 0
            author.dataList.forEach(data => {
                index ++;
                const a = document.createElement('a');
                a.href = '#';
                a.textContent = data.title;
                a.addEventListener('click', function(e) {
                    e.preventDefault(); // 阻止链接的默认行为
                    playSong(data.url,index,data.title,author.name);
                });
                let indexE = document.createElement('span');
                indexE.textContent = index+"：";
                const duration = document.createElement('divspan');
                duration.textContent = "视频时长："+data.duration;
                duration.style.color = 'cadetblue'
                //.style.textAlign = 'right';
                duration.style.fontSize = '10px'

                const published = document.createElement('span');
                published.textContent = "\t更新时间："+data.published.substring(0,10);
                published.style.color = 'cadetblue'
                //published.style.textAlign = 'right';
                published.style.fontSize = '10px'

                dataList.appendChild(published)
                //dataList.appendChild(document.createElement('br'))
                dataList.appendChild(indexE)
                dataList.appendChild(a)
                dataList.appendChild(document.createElement('br'))
                dataList.appendChild(duration)
                dataList.appendChild(published)
                dataList.appendChild(document.createElement('br'))
                dataList.appendChild(document.createElement('br'))

            });
        }else {
            let tip = document.createElement('div');
            tip.textContent="作者很懒，这几天没更新！"
            tip.style.fontSize = '10px'
            tip.style.color = 'cadetblue'
            dataList.appendChild(tip)
        }



        authors.appendChild(authorName);
        authors.appendChild(dataList);

        authors.appendChild(document.createElement('hr'));

    });

  
    // 播放歌曲  
    function playSong(url,index,title,name) {
        const audioPlayer = document.getElementById('audio-player');  
        audioPlayer.src = url; // 设置音频文件的URL  
        audioPlayer.play(); // 播放音频
        const newPlay = document.getElementById('newPlay');
        var text = "正在播放："+name+"  "+index+"  "+title
        //text = text.substring(0,20)+"……"
        newPlay.textContent = text;
    }

    const backToTopBtn = document.getElementById('backToTopBtn');  
backToTopBtn.addEventListener('click', function() {  
    window.scrollTo({  
        top: 0,  
        behavior: 'smooth' // 平滑滚动（可选）  
    });  
}); 
</script>  
  
</body>
<style>
    .ellipsis {
        /* 设置宽度，如果需要的话（也可以不设置，让元素自然流动） */
        /* width: 100%; 或其他具体值 */
        white-space: nowrap; /* 防止文本换行 */
        overflow: hidden; /* 隐藏超出容器的部分 */
        text-overflow: ellipsis; /* 用省略号表示被截断的文本 */
    }
    .circle {  
        width: 30px; /* 设置你想要的宽度 */  
        height: 30px; /* 设置与宽度相同的高度 */  
        border-radius: 50%; /* 设置为50%以创建圆形 */  
        background-color: rgb(255, 255, 255); /* 设置背景颜色，这里为红色 */  
        /* 可以添加其他样式，如边框、阴影等 */  
}
</style>
</html>
